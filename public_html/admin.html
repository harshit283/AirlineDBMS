<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ADMIN</title>
    <link rel="stylesheet" type="text/css" href="materialize/css/materialize.css">
    <script src="materialize/js/jquery.js"></script>
    <script src="materialize/js/materialize.js"></script>

</head>
<body style="display: none">
<nav class="light-blue darken-4">
    <div class="navbar-wrapper ">
            <a href="#" class="left brand-logo" STYLE="left:5px">Admin Portal</a>
        <ul class="right brand-logo">
            <a href="index.html">Logout</a></ul>
    </div>
</nav>
<div class="container">
    <br><br>
    <div class="row">
        <div class="s12 m4 l4 col"></div>
        <div class="col s12 m4 l4">
            <div class="btn btn-block red btn-large" id="add_flight">ADD FLIGHT</div>
        </div>
        <div class="s12 m4 l4 col"></div>
    </div>
    <br><br>
    <div class="container" style="display: none" id="flight_details">
    <div class="row">
                        <div class="col s12 l3 m3"></div>
                        <div class="col s12 l6 m6">
                            <div class="input-field">
                                <label class="active" for="Flight_Id">FLIGHT ID</label>
                                <input type="text" name="Flight Id" id="Flight_Id" class="form-control input-lg"  required>
                            </div>
                        </div>
                        <div class="col s12 l3 m3"></div>
    </div>
                    <div class="row">
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3">
                            <div class="input-field">
                                <label class="active" for="source">SOURCE</label>
                                <select class="form-control" id="source">
                                    <option value="DELHI">DELHI</option>
                                    <option value="MUMBAI">MUMBAI</option>
                                    <option value="CHENNAI">CHENNAI</option>
                                    <option value="KOLKATA">KOLKATA</option>
                                    <option value="BANGALORE">BANGALORE</option>
                                    <option value="LUCKNOW">LUCKNOW</option>
                                </select>
                            </div>
                        </div>
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3">
                            <div class="input-field">
                                <label class="active" for="destination">DESTINATION</label>
                                <select class="form-control" id="destination">
                                    <option value="DELHI">DELHI</option>
                                    <option value="MUMBAI">MUMBAI</option>
                                    <option value="CHENNAI">CHENNAI</option>
                                    <option value="KOLKATA">KOLKATA</option>
                                    <option value="BANGALORE">BANGALORE</option>
                                    <option value="LUCKNOW">LUCKNOW</option>
                                </select>
                            </div>
                        </div>
                        <div class="col s12 l2 m2"></div>
                    </div>
                    <div class="row">
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3 input-field">
                            <label class="active" for="depart_time">DEPARTURE TIME</label>
                            <input type="TIME" name="depart_time" id="depart_time" class="form-control input-lg"  required>
                        </div>
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3 input-field">
                            <label class="active" for="arrival_time">ARRIVAL TIME</label>
                            <input type="TIME" name="arrival_time" id="arrival_time" class="form-control input-lg" required>
                        </div>
                        <div class="col s12 l2 m2"></div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3 input-field">
                            <label class="active" for="fare">FARE</label>
                            <input type="number" name="fare" id="fare" class="form-control input-lg"   required>
                        </div>
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3 input-field">
                            <label class="active" for="date">DATE</label>
                            <input type="date" name="date" id="date" class="form-control input-lg" required>
                        </div>
                        <div class="col s12 l2 m2"></div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col s12 l2 m2"></div>
                        <div class="col s12 l3 m3 input-field">
                            <label class="active" for="total_seats">TOTAL SEATS</label>
                            <input type="number" name="total_seats" id="total_seats" class="form-control input-lg"   required>
                        </div>
                        <div class="col s12 l2 m2"></div>
                        <div class="col l3 m3 s12 input-field">
                            <label class="active" for="total_seats_avl">TOTAL AVAILABLE SEATS</label>
                            <input type="number" name="total_seats_avl" id="total_seats_avl" class="form-control input-lg"  required>
                        </div>
                        <div class="col s12 l2 m2"></div>
                    </div>
        <br>
        <div class="row">
            <div class="col s12 l5 m5"></div>
            <div class="col s12 l2 m2">
                <div class="btn btn-block green" id="submit_details">SUBMIT</div>
            </div>
            <div class="col s12 l5 m5"></div>
    </div>
    <br>
</div>
</div>
<script>
    $(function () {
        $(".button-collapse").sideNav();
        $('select').material_select();
        var val = prompt("Enter Admin Password");
        if(val!='ADMIN'){
            alert("Invalid Password Redirecting to home page");
            window.location.href='index.html';
        }
        else {
            $("body").css('display','block');
        }
    });
    $('#add_flight').click(function () {
        $("#flight_details").css("display","block");
    });
    $('#submit_details').click(function () {
        $('#submit_details').html("Loading...");
        var obj={ };
        /**
         * flightId:details.flightId,
         source:details.source,
         destination:details.destination,
         fare:details.fare,
         timeOfDeparture:details.timeOfDeparture,
         timeOfArrival:details.timeOfArrival,
         totalSeats:details.totalSeats,
         totalAvailable:details.totalAvailable,
         totalFilled:details.totalFilled,
         date:details.date
         */
        obj.flightId=$("#Flight_Id").val();
        obj.source = $("#source").val();
        obj.destination = $("#destination").val();
        obj.timeOfDeparture = $("#depart_time").val();
        obj.timeOfArrival = $("#arrival_time").val();
        obj.fare = $("#fare").val();
        obj.date = $("#date").val();
        obj.totalAvailable = $("#total_seats_avl").val();
        obj.totalSeats = $("#total_seats").val();
        console.log(obj);
        if(obj.source == obj.destination)
        {
            alert("Source and Destination cannot be same");
            return;
        }

        $.post('/check',{flightId:obj.flightId},function (data,status) {
            if(data=="no"){
                alert("Flight Id already used");
                $("#flight_id").html(' ');
            }
            else {
                console.log(obj);
                $.post('/add_flight',obj,function (data,status) {
                    alert("Done. Flight Added");
                });
                $('#submit_details').html("SUBMIT");
            }
        });
    })
</script>
</body>
<style>

    .container
    {
        width: 100%;
    }
    .row
    {
        width: 100%;
    }

</style>
</html>